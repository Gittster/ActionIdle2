<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ActionIdle</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <div class="app-container">
            <div id="item-tooltip" class="item-tooltip hidden">
                </div>
        </div> 
        <div id="login-screen">
             <h1 class="title">ACTION IDLE</h1>
            <div class="form-group"> <label for="login-email" class="sr-only">Email</label> <input type="email" id="login-email" placeholder="Email" required> </div>
            <div class="form-group"> <label for="login-password" class="sr-only">Password</label> <input type="password" id="login-password" placeholder="Password" required> </div>
            <div id="login-feedback" class="feedback-message"></div> <div id="login-error" class="error-message"></div>
            <button id="login-button" class="primary-button">Login</button> <button id="register-button" class="secondary-button">Register</button>
            <button id="reset-password-button" class="link-button">Forgot Password?</button>
            <div class="divider"><span>OR</span></div>
            <button id="google-signin-button" class="google-button"> <svg aria-hidden="true" class="google-icon" width="18" height="18" viewBox="0 0 18 18"><path d="M16.51 8.1H8.98v3.2h4.34c-.18 1.18-.88 2.6-2.6 2.6-1.56 0-2.84-1.3-2.84-2.9s1.28-2.9 2.84-2.9c.84 0 1.48.36 1.82.68l2.3-2.3C14.56 3.1 12.49 2 10 2 6.13 2 3 5.13 3 9s3.13 7 7 7c3.6 0 6.7-2.8 6.7-6.7 0-.6-.06-1.14-.19-1.64z" fill="#4285F4"/><path d="M3.99 10.88c-.1-.3-.15-.6-.15-1s.05-.7.15-1L1.19 7.1C.75 8.05.5 9.1.5 10.24s.25 2.19.74 3.14l2.76-2.5z" fill="#FBBC05"/><path d="M10 16.9c1.38 0 2.56-.45 3.4-.95l-2.76-2.5c-.5.34-1.16.55-1.9.55-1.56 0-2.88-1.08-3.35-2.54L1.19 14.4c1.18 2.4 3.75 4.1 6.81 4.1z" fill="#34A853"/><path d="M9.95 5.18c.86 0 1.6.28 2.2.88l2.3-2.3C13.4.95 11.76 0 10 0 6.84 0 4.16 1.7 3.02 4.1L5.78 6.6C6.25 5.1 7.97 4 9.95 4z" fill="#EA4335"/></svg> Sign in with Google </button>
        </div>

        <div id="char-select-screen" class="hidden">
             <h2 class="title">SELECT CHARACTER</h2>
            <div id="character-list" class="character-list-container"> <p class="no-characters-message">No characters found.</p> </div>
            <div id="delete-confirm-dialog" class="hidden delete-confirm-card"> <p id="delete-confirm-message">Are you sure?</p> <div class="dialog-button-group"> <button id="confirm-delete-button" class="action-button delete-button">Confirm Delete</button> <button id="cancel-delete-button" class="action-button secondary-button">Cancel</button> </div> </div>
            <div id="character-actions" class="character-actions-container"> <button id="launch-char-button" class="action-button launch-button" disabled>Launch</button> <button id="delete-char-button" class="action-button delete-button" disabled>Delete</button> </div>
            <div id="char-select-error" class="error-message"></div>
            <button id="create-new-char-button">Create New Character</button> <button id="logout-button" class="secondary-button">Logout</button>
        </div>

        <div id="char-create-screen" class="hidden">
             <h2 class="title">CREATE CHARACTER</h2>
            <div class="form-group"> <label for="char-name">Character Name:</label> <input type="text" id="char-name" placeholder="Enter name" required> </div>
            <div class="form-group">
                <label>Select Class:</label>
                <div id="class-selection" class="class-selection-grid">

                    <div class="class-card" data-class="Juggernaut">
                        <h4 class="class-title">Juggernaut</h4>
                        <p class="class-description">Heavily augmented brawler focused on melee combat, durability, and explosives.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                    <div class="class-card" data-class="Sharpshooter">
                        <h4 class="class-title">Sharpshooter</h4>
                        <p class="class-description">Agile marksman utilizing ranged weapons, high speed, drones, and traps.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                    <div class="class-card" data-class="Psion">
                        <h4 class="class-title">Psion</h4>
                        <p class="class-description">Master of mental powers, energy manipulation, hacking, and deployable constructs.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                    <div class="class-card" data-class="Blade Dancer">
                        <h4 class="class-title">Blade Dancer</h4>
                        <p class="class-description">Fast hybrid warrior excelling in close-quarters combat with blades and agile ranged attacks.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                    <div class="class-card" data-class="Warden">
                        <h4 class="class-title">Warden</h4>
                        <p class="class-description">Tech-focused guardian using defensive fields, energy weapons, and combat robotics.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                    <div class="class-card" data-class="Infiltrator">
                        <h4 class="class-title">Infiltrator</h4>
                        <p class="class-description">Stealth operative specializing in critical strikes, damage over time, traps, and debuffs.</p>
                        <button class="class-select-button">Select</button>
                    </div>

                </div>
                <input type="hidden" id="selected-class" value=""> </div>
            <div id="char-create-error" class="error-message"></div>
            <button id="create-button">Create</button> <button id="back-to-select-button" class="secondary-button">Back to Selection</button>
        </div>

        <div id="town-screen" class="hidden town-container">
            <header class="town-header">
                <div id="town-header-info" class="town-header-info">
                    <span id="town-char-name">Character</span> -
                    <span>Lvl <span id="town-char-level">1</span></span>
                    (<span id="town-char-class">Class</span>)
                    <span class="currency">Credits: <span id="town-currency">0</span></span>
                </div>
                <header class="town-header">
                    <nav id="town-nav" class="town-nav">
                        <button class="town-nav-button active" data-panel="overview-panel">Overview</button>
                        <button class="town-nav-button" data-panel="inventory-panel">Loadout</button> <button class="town-nav-button" data-panel="missions-panel">Missions</button> <button class="town-nav-button" data-panel="station-panel">Station</button> <button class="town-nav-button" data-panel="skills-panel">Skills</button>
                        <button class="town-nav-button" data-panel="map-panel">Map</button>
                        <button class="town-nav-button" data-panel="vendor-panel">Trade</button>
                        <button class="town-nav-button" data-panel="crafting-panel">Craft</button>
                        <button id="town-switch-char-button" class="town-switch-button">Switch Char</button>
                        <button id="town-logout-button" class="town-logout-button">Logout</button>
                        </nav>
                </header>
            </header>

            <main class="town-main-content">
                 <div id="overview-panel" class="town-panel active">
                    <h3 class="panel-title">Station Overview</h3>
                    <p>Welcome back, <span id="overview-char-name">[Character Name]</span>!</p>
                    <p>Current objective: [Placeholder for mission status]</p>
                    <p>Station Status: [Placeholder for station upgrades/idle status]</p>
                </div>

                <div id="inventory-panel" class="town-panel hidden">
                    <h3 class="panel-title">Loadout & Inventory</h3>
                    <div class="loadout-grid">
                        <div class="character-preview-area">
                            <h4>Equipment</h4>
                            <div class="equipment-slots">
                                <div class="equip-slot" data-slot="head">Head</div>
                                <div class="equip-slot" data-slot="chest">Chest</div>
                                <div class="equip-slot" data-slot="legs">Legs</div>
                                <div class="equip-slot" data-slot="feet">Feet</div>
                                <div class="equip-slot" data-slot="weapon1">Weapon 1</div>
                                <div class="equip-slot" data-slot="weapon2">Weapon 2</div>
                                <div class="equip-slot" data-slot="accessory1">Accessory 1</div>
                                <div class="equip-slot" data-slot="accessory2">Accessory 2</div>
                            </div>
                        </div>
                        <div class="inventory-area">
                            <h4>Inventory</h4>
                            <div id="inventory-grid" class="inventory-grid">
                                </div>
                        </div>
                    </div>
                </div>

                 <div id="missions-panel" class="town-panel hidden">
                     <h3 class="panel-title">Mission Control</h3>
                     <p>Available missions and main quest line details go here...</p>
                </div>

                 <div id="station-panel" class="town-panel hidden">
                     <h3 class="panel-title">Station Management</h3>
                     <p>Station upgrades, idle resource generation, etc. go here...</p>
                </div>
                <div id="stats-panel" class="town-panel hidden"> <h3 class="panel-title">Character Stats</h3> <p>Stats details will go here...</p> </div>
                <div id="skills-panel" class="town-panel hidden">
                    <h3 class="panel-title">Skills & Augmentations</h3>
                    <div class="skills-content">
                        <p>Learned Skills: (Click a skill below, then click a slot to assign)</p>
                        <div id="learned-skills-list">
                            <p>No skills learned yet.</p>
                        </div>
   
                        <p class="mt-4">Assign Skills:</p>
                        <div id="skill-assignment-bar" class="skill-assignment-container">
                            <div class="assign-skill-slot" data-slot-index="0" data-key="1"><span>1</span></div>
                            <div class="assign-skill-slot" data-slot-index="1" data-key="2"><span>2</span></div>
                            <div class="assign-skill-slot" data-slot-index="2" data-key="3"><span>3</span></div>
                            <div class="assign-skill-slot" data-slot-index="3" data-key="4"><span>4</span></div>
                            <div class="assign-skill-slot mouse-skill" data-slot-index="4" data-key="LMB"><span>LMB</span></div>
                            <div class="assign-skill-slot mouse-skill" data-slot-index="5" data-key="RMB"><span>RMB</span></div>
                        </div>
                        <p class="mt-4">Passive Tree / Augmentations interface will go here...</p>
                    </div>
               </div>
                <div id="overview-panel" class="town-panel active">
                </div>

            <div id="inventory-panel" class="town-panel hidden">
               </div>

             <div id="missions-panel" class="town-panel hidden">
                 </div>

             <div id="station-panel" class="town-panel hidden">
                 </div>

            <div id="stats-panel" class="town-panel hidden"> </div>
            <div id="skills-panel" class="town-panel hidden"> </div>

            <div id="map-panel" class="town-panel hidden">
                 <h3 class="panel-title">Stellar Navigation</h3>
                 <div class="map-area">
                     <p>Select a destination node:</p>
                     <button id="zone-node-1" class="map-node" data-zone-id="zone1">Landing Zone Alpha</button>
                     <button id="enter-zone-button" class="action-button launch-button" disabled>Enter Zone</button>
                     </div>
             </div>
            <div id="vendor-panel" class="town-panel hidden"> </div>
            <div id="crafting-panel" class="town-panel hidden"> </div>
                <div id="vendor-panel" class="town-panel hidden"> <h3 class="panel-title">Trade Kiosk</h3> <p>Vendor interface will go here...</p> </div>
                <div id="crafting-panel" class="town-panel hidden"> <h3 class="panel-title">Fabricator</h3> <p>Crafting interface will go here...</p> </div>
            </main>
        </div> 
        <div id="game-screen" class="hidden game-container">
            <canvas id="game-canvas"></canvas>
            <div id="minimap-container">
                <div id="minimap-viewport"></div> </div>
            <button id="exit-game-button" class="exit-game-button">Exit to Town</button>
            </div>
        </div>
    </div> 
    <script type="module" src="script.js"></script>
</body>
</html>
